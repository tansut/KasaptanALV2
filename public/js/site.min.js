"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ownKeys(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)),o}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}window.initComponents=function(){Vue.component("weight-view",{template:"<span>{{text}}</span>",props:{kg:{type:Number,default:0}},data:function(){return{}},methods:{grtext:function(t,e){}},computed:{text:function(){return t=this.kg,e=Math.floor(t),n=Math.round(1e3*(t-e)),t="",t=500==n?0<e?".5 kg":"yarım kg":0==n?"":"".concat(n,"gr"),500==n?(0<e?"".concat(e," "):"")+t||"":(0<e?"".concat(e," kg "):"")+t||"";var t,e,n}}}),Vue.component("money-view",{template:'\n            <span>\n            {{formatCurrency(money).val}}<span v-if="splitCurrency(money).krs > 0.00">.<small>{{formatCurrency(money).krs}}</small></span>&#8378;\n            <span v-if="unit">/{{unit}}</span>\n            <del class=" text-primary font-weight-normal" v-if="regular && regular > money">\n            \n            {{formatCurrency(regular).val}}<span v-if="splitCurrency(regular).krs > 0.00">.<small>{{formatCurrency(regular).krs}}</small></span>&#8378;\n            </del>\n            </span>',props:{money:{type:Number},regular:{type:Number},unit:{type:this.String}},methods:{formatCurrency:function(t){return window.App.formatCurrency(t)},splitCurrency:function(t){return window.App.splitCurrency(t)}}}),Vue.component("amount-input",{template:'\n             <div>\n                <slot />\n                    <div class="d-flex align-items-center justify-content-center">\n                        <button type="button" style="touch-action: manipulation" @click="decrement()" class="btn btn-sm btn-secondary rounded-lg mr-4"><i class="czi-arrow-left-circle"></i></button>\n                        <div class="d-inline text-nowrap text-center" style="min-width:5rem">\n                            <div class="font-size-lg " v-if="unit.toLowerCase()!=\'kg\'">\n                                <span class="mb-1 font-weight-medium">{{value || \'?\'}}</span>\n                                <small>{{unit}}</small>\n                            </div>\n                            <div class=" font-size-lg font-weight-medium">\n                                <weight-view v-if="unit.toLowerCase()==\'kg\'" :kg="value"></weight-view>\n                            </div>\n                        </div>\n                        <button type="button" style="touch-action: manipulation" @click="increment()" class="btn btn-sm rounded-lg btn-secondary ml-4"><i class="czi-arrow-right-circle"></i></button>\n                    </div>     \n            </div>\n              ',props:{unit:{type:String,default:""},min:{type:Number},max:{type:Number},step:{type:Number},def:{type:Number},value:{type:Number}},mounted:function(){this.$nextTick(function(){this.updateView()})},data:function(){return{value:1}},methods:{normalized:function(t){return t="kg"==this.unit.toLowerCase()?Number(t.toFixed(3)):t},increment:function(){var t=this.normalized(this.value+this.step);t<=this.max&&(this.value=t)},decrement:function(){var t=this.normalized(this.value-this.step);t>=this.min&&(this.value=t)},updateView:function(){}},watch:{value:function(t,e){this.$emit("input",this.value)},def:function(t,e){this.value=this.value||t}}}),window.App.WeightCalculatorApp=new Vue({el:"#size-chart",data:function(){return{product:null,productView:null,personcount:4,meal:1,note:null,perperson:null,unit:null,cardnote:"",cardnoteph:"",food:{},title:"",resources:null,noteHeader:"",selectedResource:null}},methods:{onChange:function(t){},foodResources:function(){return(this.resources||[]).filter(function(t){return t.tag1&&(t.tag1.includes("yemek")||t.tag1.includes("tarif"))&&t.settings&&t.settings.po_perperson})},setResource:function(t){t.settings=t.settings||{},this.personcount=this.personcount||t.settings.po_personcount&&Number(t.settings.po_personcount)||this.defaultOptions.personcount||4,this.cardnote=t.settings.defaultNote||this.defaultOptions.cardnote,this.perperson=t.settings.po_perperson&&Number(t.settings.po_perperson)||this.defaultOptions.perperson,this.note=t.settings.po_quantityNote||this.defaultOptions.note,this.unit=t.settings.po_unit||this.defaultOptions.unit,this.noteHeader=t.title,this.selectedResource=t},show:function(t){return t.personcount=t.personcount||0,t.note=t.note||"",t.cardnote=t.cardnote||"",t.cardnoteph=t.cardnoteph||"",t.perperson=t.perperson||null,this.defaultOptions=t,this.unit=t.unit,this.title=t.title,this.personcount=t.personcount,this.perperson=t.perperson||null,this.note=t.note,this.cardnote=t.cardnote||"",this.cardnoteph=t.cardnoteph||"",this.food=t.food||{},this.productView=t.productView,this.resources=t.resources,$("#size-chart").modal("show"),new Promise(function(n,t){$(window).on("wc.setunit",function(t,e){n(e)})})},setUnit:function(t){$(window).trigger("wc.setunit",[t])}},computed:{result:function(){var t=[];if(this.product)for(var e,n=0;n<this.product.purchaseOptions.length;n++)this.unit&&this.unit!=this.product.purchaseOptions[n].unit||(e=this.meal*this.personcount*(this.perperson||this.product.purchaseOptions[n].perPerson),(e=Number(e.toFixed(3)))<this.product.purchaseOptions[n].min?e=this.product.purchaseOptions[n].min:e>this.product.purchaseOptions[n].max&&(e=this.product.purchaseOptions[n].max),e=Math.ceil(e/this.product.purchaseOptions[n].step)*this.product.purchaseOptions[n].step,t.push({quantity:Number(e.toFixed(3)),unit:this.product.purchaseOptions[n].unit,po:this.product.purchaseOptions[n]}));return t}}}),window.App.FoodAlternativesApp=new Vue({el:"#food-alternative-meats",data:function(){return{list:[],title:""}},methods:{show:function(t,e){this.list=t,this.title=e,$("#food-alternative-meats").modal("show")}}}),window.App.AlternativeButchersApp=new Vue({el:"#alternativebutchersapp",data:function(){return{product:null}}}),window.App.ProductApp=new Vue({el:"#productapp",data:function(){return{product:null,quantity:0,selectedUnit:null,note:"",newlyAddedItem:null,shopCardIndex:-1,alternateSort:null,selectedNutrition:null,shipDay:null,shipHour:null}},mounted:function(){var n=this;$(window).on("wc.setunit",function(t,e){n.selectedUnit=e.po,this.setTimeout(function(){n.quantity=e.quantity})}),$("#shopcard-added-toast").on("hidden.bs.toast",function(){n.newlyAddedItem=null})},methods:{onChange:function(t){},selectedUnitForAlternate:function(e){var n=this;if(!this.product||!this.selectedUnit)return null;var t=this.product.alternateButchers.find(function(t){return t.butcher.slug==e.slug});return t?t.purchaseOptions.find(function(t){return t.unit==n.selectedUnit.unit})||t.purchaseOptions[0]:null},formatCurrency:function(t){return window.App.formatCurrency(t)},loadFromUrl:function(){var e=new URLSearchParams(window.location.search);this.product&&e.has("selectedUnit")&&(this.selectedUnit=this.product.purchaseOptions.find(function(t){return t.unit==e.get("selectedUnit")}),this.selectedUnit=this.selectedUnit||this.product.purchaseOptions[0]),this.product&&e.has("quantity")&&(this.quantity=parseFloat(e.get("quantity")),this.selectedUnit&&(this.quantity=this.quantity<this.selectedUnit.min?this.selectedUnit.default:this.quantity,this.quantity=this.quantity>this.selectedUnit.max?this.selectedUnit.default:this.quantity)),this.product&&e.has("note")&&(this.note=e.get("note")),this.selectedUnit=this.selectedUnit||this.product.purchaseOptions[0]},selectNewButcher:function(t){var e=this,n="string"==typeof t?t:t.slug,t=new URLSearchParams(window.location.search),n="/"+e.product.slug+"?butcher="+n;e.selectedUnit&&(n+="&selectedUnit="+encodeURIComponent(e.selectedUnit.unit)),e.quantity&&(n+="&quantity="+encodeURIComponent(e.quantity)),e.note&&(n+="&note="+encodeURIComponent(e.note)),t.has("frame")&&(n+="&frame="+encodeURIComponent(t.get("frame"))),window.location.href=n+"#noteanchor"},selectArea:function(o,t){var r=this;window.kb.selectArea(function(t,e){var n;o||(n=new URLSearchParams(window.location.search),o=n.has("butcher")?"/"+r.product.slug+"?butcher="+n.get("butcher")+"&action=add2sc&utm_medium="+(n.has("utm_medium")?n.get("utm_medium"):""):"/"+r.product.slug+"?action=add2sc&utm_medium="+(n.has("utm_medium")?n.get("utm_medium"):""),r.selectedUnit&&(o+="&selectedUnit="+encodeURIComponent(r.selectedUnit.unit)),r.quantity&&(o+="&quantity="+encodeURIComponent(r.quantity)),r.note&&(o+="&note="+encodeURIComponent(r.note)),o+="#aftersetloc"),window.location.href="/adres-belirle/"+e.selectedDistrict.slug+"?lng="+e.lng+"&lat="+e.lat+"&r="+encodeURIComponent(o)},{msg:t})},asCurrency:function(t){return Number(t.toFixed(2))},showCalculator:function(t){this.addToNote({title:this.product.name,note:this.note,unit:t.unit,noteph:t.notePlaceholder,ponote:t.weigthNote,resources:this.product.resources})},addToNote:function(t){this.ensureUnitSelected(),window.App.WeightCalculatorApp.show({unit:t.unit,title:t.title,food:t.food,productView:t.productView,personcount:t.personCount,perperson:t.perperson,note:t.ponote,cardnote:t.note,cardnoteph:t.noteph,resources:t.resources}).then(function(t){window.App.ProductApp.note=window.App.WeightCalculatorApp.cardnote,window.App.ProductApp.note&&($("#note").css({"background-color":"#fde9e8"}),setTimeout(function(){$("#note").css({"background-color":"initial"})},1e3)),window.lgData.lg0.destroy(),window.App.scrollToAnchor("#noteanchor")}).catch(function(t){return console.log(t)})},ensureUnitSelected:function(){this.selectedUnit||(this.selectedUnit=this.product.purchaseOptions[0])},setShopcardItem:function(){var e=window.shopcard.card.data.items[this.shopCardIndex];this.quantity=e.quantity,this.note=e.note,this.selectedUnit=this.product.purchaseOptions.find(function(t){return t.unit==e.purchaseoption.unit})},getNutritionValues:function(t){return this.selectedNutrition?t.values.filter(function(t){return!t.type.startsWith("vitamin")}):[]},getNutritionVitamins:function(t){return this.selectedNutrition?t.values.filter(function(t){return t.type.startsWith("vitamin")}):[]},getDailyPerc:function(e){if(!this.selectedNutrition)return 0;var t=this.product.nutritionView.dailyValues[e];if(!t)return 0;var n=0;if("calories"==e)n=this.selectedNutrition.calories;else{var o=this.selectedNutrition.values.find(function(t){return t.type==e});if(!o)return 0;if("%"==o.unit)return o.amount;o&&(n=o.amount),t=t[o.unit]}return t?Math.round(n/t*100):0},getNutritionPerc:function(e){if(!this.selectedNutrition)return 0;var t=this.selectedNutrition.values.find(function(t){return"fat"==t.type}),n=this.selectedNutrition.values.find(function(t){return"carb"==t.type}),o=this.selectedNutrition.values.find(function(t){return"protein"==t.type}),n=(t?t.amount:0)+(n?n.amount:0)+(o?o.amount:0),o=this.selectedNutrition.values.find(function(t){return t.type==e});return o?Math.round(o.amount/n*100):0},getNutrition:function(e){return this.selectedNutrition?this.selectedNutrition.values.find(function(t){return t.type==e}):0},isSorted:function(t,e){return(t=t||"").startsWith(e)},toggleSort:function(t,e,n){var o="",r="";return t&&(o=(t=t.split(":"))[0],r=1<t.length?t[1]:"asc"),e+":"+(n=e==o?"asc"==r?"desc":"asc":n)},addToShopcard:function(t){var n=this;if(!t||t.target.checkValidity()){$("#addtoscbtn").attr("disabled",!0);this.shopCardIndex;t={};"adak"==this.product.productType?t={vekalet:$("#adak-vekalet").val(),video:$("#adak-video").val(),hisse:$("#adak-hisse").val(),kiminadina:$("#kurban-kiminadina").val()}:"kurban"==this.product.productType?(e=document.getElementById("kurban-bagis-mi").checked,t={vekalet:$("#kurban-vekalet").val(),video:$("#kurban-video").val(),teslimat:e?"0":$("#kurban-teslimat").val(),kiminadina:$("#kurban-kiminadina").val(),bagis:e,bagisTarget:$("#kurban-bagis-target").val(),bagisNote:$("#kurban-bagis-note").val()}):"kurbandiger"==this.product.productType&&(t={vekalet:$("#adak-vekalet").val(),video:$("#adak-video").val(),kiminadina:$("#kurban-kiminadina").val()});var e=new URLSearchParams(window.location.search);return App.Backend.post("shopcard/add",{id:this.product.id,butcher:this.product.butcher,quantity:this.quantity,purchaseoption:this.selectedUnit,productTypeData:t,note:this.note,shopcardIndex:this.shopCardIndex,userSelectedButcher:e.has("butcher")?e.get("butcher"):void 0}).then(function(t){var e=n.newlyAddedItem=t.items[t.items.length-1];return n.$nextTick(function(){$("#shopcard-added-toast").toast("show"),"undefined"!=typeof fbq&&fbq("track","AddToCart",{content_id:e.product.id,content_name:e.product.name,currency:"TRY",value:e.price,content_type:"product"})}),window.parent&&window.parent.shopcard&&window.parent.shopcard.card&&(window.parent.shopcard.card.data=t),window.shopcard.card.data=t}).finally(function(){$("#addtoscbtn").attr("disabled",!1)}).catch(function(t){return App.HandleError(t)})}}},watch:{shipDay:function(t,e){t&&(this.shipHour=Object.keys(t.hours)[0])},product:function(t,e){t&&(this.quantity=null,this.$nextTick(function(){0<=this.shopCardIndex?this.setShopcardItem():(this.loadFromUrl(),this.selectedUnit=this.selectedUnit||(1<this.product.purchaseOptions.length?null:this.product.purchaseOptions[0]))}),!this.selectedNutrition&&t.nutritionView&&(this.selectedNutrition=t.nutritionView.values[0]),!this.shipDay&&t.shipmentDayHours&&(this.shipDay=t.shipmentDayHours[0]))},selectedUnit:function(t,e){t&&e?this.quantity=t.default:t&&(this.quantity=this.quantity||t.default),this.selectedUnit&&this.quantity&&window.App.ProductApp.add2ScOnce&&(window.App.ProductApp.add2ScOnce=!1,this.addToShopcard())}},computed:{sortedAlternates:function(){var r=this;var t=_toConsumableArray(this.product.alternateButchers);return this.alternateSort?t.sort(function(t,e){var n=(o=r.alternateSort.split(":"))[0],o=1<o.length?o[1]:"asc",t=App.getProp(t,n),n=App.getProp(e,n);if("asc"==o){if(t<n)return-1;if(n<t)return 1}else{if(n<t)return-1;if(t<n)return 1}return 0}):t},price:function(){if(this.selectedUnit&&this.quantity){var t=Number(this.quantity.toFixed(3));return this.asCurrency(this.selectedUnit.unitPrice*t)}return 0},puan:function(){var t=this.price;return 0<=t&&this.product&&this.product.butcher&&this.product.butcher.puanData&&0<this.product.butcher.puanData.rate?Number((t*this.product.butcher.puanData.rate).toFixed(2)):0}}}),window.App.LocationSelectorApp=new Vue({el:"#locationselect"}),window.App.ShopcardShipmentApp=new Vue({el:"#shopcardshipment",data:function(){return{card:null,disableShip:!1,cannotShip:!1}},mounted:function(){},methods:{setShipMethod:function(t,e){this.card.shipment[t].howTo=e,this.disableShip="take"!=e&&this.cannotShip}},watch:{selectedUnit:function(t,e){t&&(this.quantity=t.default)}},computed:{}})},function(a){var t={init:function(){t.stuckNavbarMenuToggle(),t.passwordVisibilityToggle(),t.customFileInput(),t.formValidation(),t.tooltips(),t.toasts(),t.carousel(),t.gallery(),t.videoPopupBtn()},stuckNavbarMenuToggle:function(){var t=document.querySelector(".navbar-stuck-toggler"),e=document.querySelector(".navbar-stuck-menu");null!=t&&t.addEventListener("click",function(t){e.classList.toggle("show"),t.preventDefault()})},passwordVisibilityToggle:function(){for(var n=document.querySelectorAll(".password-toggle"),t=0;t<n.length;t++)!function(t){var e=n[t].querySelector(".form-control");n[t].querySelector(".password-toggle-btn").addEventListener("click",function(t){"checkbox"===t.target.type&&(t.target.checked?e.type="text":e.type="password")},!1)}(t)},customFileInput:function(){bsCustomFileInput.init()},fileDropArea:function(){for(var e=document.querySelectorAll(".cz-file-drop-area"),t=0;t<e.length;t++)!function(t){var o=e[t].querySelector(".cz-file-drop-input"),r=e[t].querySelector(".cz-file-drop-message"),i=e[t].querySelector(".cz-file-drop-icon");e[t].querySelector(".cz-file-drop-btn").addEventListener("click",function(){o.click()}),o.addEventListener("change",function(){var t;o.files&&o.files[0]&&((t=new FileReader).onload=function(t){var e,t=t.target.result,n=o.files[0].name;r.innerHTML=n,t.startsWith("data:image")?((e=new Image).src=t,e.onload=function(){i.className="cz-file-drop-preview img-thumbnail rounded",i.innerHTML='<img src="'+e.src+'" alt="'+n+'">',console.log(this.width)}):t.startsWith("data:video")?(i.innerHTML="",i.className="",i.className="cz-file-drop-icon czi-video"):(i.innerHTML="",i.className="",i.className="cz-file-drop-icon czi-document")},t.readAsDataURL(o.files[0]))})}(t)},formValidation:function(){window.addEventListener("load",function(){var t=document.getElementsByClassName("needs-validation");Array.prototype.filter.call(t,function(e){e.addEventListener("submit",function(t){!1===e.checkValidity()&&(t.preventDefault(),t.stopPropagation()),e.classList.add("was-validated")},!1)})},!1)},multilevelDropdown:function(){a(".dropdown-menu [data-toggle='dropdown']").on("click",function(t){t.preventDefault(),t.stopPropagation(),a(this).siblings().toggleClass("show"),a(this).next().hasClass("show")||a(this).parents(".dropdown-menu").first().find(".show").removeClass("show"),a(this).parents("li.nav-item.dropdown.show").on("hidden.bs.dropdown",function(){a(".dropdown-submenu .show").removeClass("show")})})},scrollTopButton:function(){var e,n=document.querySelector(".btn-scroll-top");null!=n&&(e=parseInt(600,10),window.addEventListener("scroll",function(t){t.currentTarget.pageYOffset>e?n.classList.add("show"):n.classList.remove("show")}))},offcanvasSidebar:function(){for(var t=document.querySelectorAll('[data-toggle="sidebar"]'),e=document.querySelectorAll('[data-dismiss="sidebar"]'),n=document.querySelector("body"),o=0;o<t.length;o++)t[o].addEventListener("click",function(t){t.preventDefault();t=t.currentTarget.getAttribute("href");document.querySelector(t).classList.add("show"),n.classList.add("offcanvas-open")});for(var r=0;r<e.length;r++)e[r].addEventListener("click",function(t){t.currentTarget.closest(".cz-sidebar").classList.remove("show"),n.classList.remove("offcanvas-open")})},tooltips:function(){a('[data-toggle="tooltip"]').tooltip()},popovers:function(){a('[data-toggle="popover"]').popover()},toasts:function(){a('[data-toggle="toast"]').on("click",function(){var t=a(this).data("target");a(t).toast("show")})},disableDropdownAutohide:function(){for(var t=document.querySelectorAll(".disable-autohide .custom-select"),e=0;e<t.length;e++)t[e].addEventListener("click",function(t){t.stopPropagation()})},carousel:function(){!function(t,e,n){for(var o=0;o<t.length;o++)e.call(n,o,t[o])}(document.querySelectorAll(".cz-carousel .cz-carousel-inner"),function(t,e){var n={container:e,controlsText:['<i class="czi-arrow-left"></i>','<i class="czi-arrow-right"></i>'],navPosition:"bottom",mouseDrag:!0,speed:500,autoplayHoverPause:!0,autoplayButtonOutput:!1};null!=e.dataset.carouselOptions&&(o=JSON.parse(e.dataset.carouselOptions));var o=_objectSpread(_objectSpread({},n),o);tns(o)})},gallery:function(){var t;if((t=document.querySelectorAll(".cz-gallery")).length)for(var e=0;e<t.length;e++)lightGallery(t[e],{selector:".gallery-item",download:!1,videojs:!0,youtubePlayerParams:{modestbranding:1,showinfo:0,rel:0,controls:0},vimeoPlayerParams:{byline:0,portrait:0,color:"fe696a"}})},productGallery:function(){var s=document.querySelectorAll(".cz-product-gallery");if(s.length)for(var t=0;t<s.length;t++)!function(n){for(var o=s[n].querySelectorAll(".cz-thumblist-item:not(.video-item)"),r=s[n].querySelectorAll(".cz-preview-item"),t=s[n].querySelectorAll(".cz-thumblist-item.video-item"),e=0;e<o.length;e++)o[e].addEventListener("click",i);function i(t){t.preventDefault();for(var e=0;e<o.length;e++)r[e].classList.remove("active"),o[e].classList.remove("active");this.classList.add("active"),s[n].querySelector(this.getAttribute("href")).classList.add("active")}for(var a=0;a<t.length;a++)lightGallery(t[a],{selector:"this",download:!1,videojs:!0,youtubePlayerParams:{modestbranding:1,showinfo:0,rel:0,controls:0},vimeoPlayerParams:{byline:0,portrait:0,color:"fe696a"}})}(t)},imageZoom:function(){for(var t=document.querySelectorAll(".cz-image-zoom"),e=0;e<t.length;e++)new Drift(t[e],{paneContainer:t[e].parentElement.querySelector(".cz-image-zoom-pane")})},videoPopupBtn:function(){var t=document.querySelectorAll(".video-popup-btn");if(t.length)for(var e=0;e<t.length;e++)lightGallery(t[e],{selector:"this",download:!1,videojs:!0,youtubePlayerParams:{modestbranding:1,showinfo:0,rel:0,controls:0},vimeoPlayerParams:{byline:0,portrait:0,color:"fe696a"}})},ajaxifySubscribeForm:function(){var e=a("#mc-embedded-subscribe-form"),n=a("#mce-EMAIL"),o=a("#mc-embedded-subscribe"),r=a(".subscribe-status"),i=o.text();o.text();e.length&&o.bind("click",function(t){t&&t.preventDefault(),t=e,o.text("Sending..."),a.ajax({type:t.attr("method"),url:t.attr("action"),data:t.serialize(),cache:!1,dataType:"jsonp",contentType:"application/json; charset=utf-8",error:function(t){alert("Could not connect to the registration server. Please try again later.")},success:function(t){"success"===t.result?(r.removeClass("status-error").addClass("status-success").text("Thank you for subscribing. We have sent you a confirmation email."),o.text(i,setTimeout(function(){r.removeClass("status-success").text("")},5e3)),n.val("")):(r.removeClass("status-success").addClass("status-error").text(t.msg.substring(4)),o.text(i,setTimeout(function(){r.removeClass("status-error").text("")},5e3)))}})})},rangeSlider:function(){for(var r=document.querySelectorAll(".cz-range-slider"),t=0;t<r.length;t++)!function(t){var e=r[t].querySelector(".cz-range-slider-ui"),n=r[t].querySelector(".cz-range-slider-value-min"),o=r[t].querySelector(".cz-range-slider-value-max"),t={dataStartMin:parseInt(r[t].dataset.startMin,10),dataStartMax:parseInt(r[t].dataset.startMax,10),dataMin:parseInt(r[t].dataset.min,10),dataMax:parseInt(r[t].dataset.max,10),dataStep:parseInt(r[t].dataset.step,10)};noUiSlider.create(e,{start:[t.dataStartMin,t.dataStartMax],connect:!0,step:t.dataStep,pips:{mode:"count",values:5},tooltips:!0,range:{min:t.dataMin,max:t.dataMax},format:{to:function(t){return"$"+parseInt(t,10)},from:function(t){return Number(t)}}}),e.noUiSlider.on("update",function(t,e){t=(t=t[e]).replace(/\D/g,"");e?o.value=Math.round(t):n.value=Math.round(t)}),n.addEventListener("change",function(){e.noUiSlider.set([this.value,null])}),o.addEventListener("change",function(){e.noUiSlider.set([null,this.value])})}(t)},filterList:function(){for(var e=document.querySelectorAll(".cz-filter"),t=0;t<e.length;t++)!function(t){var n=e[t].querySelector(".cz-filter-search"),o=e[t].querySelector(".cz-filter-list").querySelectorAll(".cz-filter-item");n.addEventListener("keyup",function(){for(var t=n.value.toLowerCase(),e=0;e<o.length;e++)-1<o[e].querySelector(".cz-filter-item-text").innerHTML.toLowerCase().indexOf(t)?o[e].classList.remove("d-none"):o[e].classList.add("d-none")})}(t)},dataFilter:function(){var t=document.querySelector('[data-filter="trigger"]'),o=document.querySelectorAll('[data-filter="target"]');null!==t&&t.addEventListener("change",function(){var t=this.options[this.selectedIndex].value.toLowerCase();if("all"===t)for(var e=0;e<o.length;e++)o[e].classList.remove("d-none");else{for(var n=0;n<o.length;n++)o[n].classList.add("d-none");document.querySelector("#"+t).classList.remove("d-none")}})},labelUpdate:function(){for(var t=document.querySelectorAll("[data-label]"),e=0;e<t.length;e++)t[e].addEventListener("change",function(){var t=this.dataset.label;try{document.getElementById(t).textContent=this.value}catch(t){t.message="Cannot set property 'textContent' of null",console.error("Make sure the [data-label] matches with the id of the target element you want to change text of!")}})},radioTabs:function(){for(var t=document.querySelectorAll('[data-toggle="radioTab"]'),e=0;e<t.length;e++)t[e].addEventListener("click",function(){var t=this.dataset.target;document.querySelector(this.dataset.parent).querySelectorAll(".radio-tab-pane").forEach(function(t){t.classList.remove("active")}),document.querySelector(t).classList.add("active")})},countdown:function(){var u=document.querySelectorAll(".cz-countdown");if(null!=u)for(var t=0;t<u.length;t++){var e=function(t){var e,n,o,r,i=u[t].dataset.countdown,a=u[t].querySelector(".cz-countdown-days .cz-countdown-value"),s=u[t].querySelector(".cz-countdown-hours .cz-countdown-value"),c=u[t].querySelector(".cz-countdown-minutes .cz-countdown-value"),l=u[t].querySelector(".cz-countdown-seconds .cz-countdown-value"),i=new Date(i).getTime();if(isNaN(i))return{v:void 0};setInterval(function(){var t=(new Date).getTime(),t=parseInt((i-t)/1e3);0<=t&&(e=parseInt(t/86400),t%=86400,n=parseInt(t/3600),t%=3600,o=parseInt(t/60),t%=60,r=parseInt(t),null!=a&&(a.innerHTML=parseInt(e,10)),null!=s&&(s.innerHTML=n<10?"0"+n:n),null!=c&&(c.innerHTML=o<10?"0"+o:o),null!=l&&(l.innerHTML=r<10?"0"+r:r))},1e3)}(t);if("object"===_typeof(e))return e.v}},charts:function(){function i(t,e){return t+e}var t=document.querySelectorAll("[data-line-chart]"),e=document.querySelectorAll("[data-bar-chart]"),a=document.querySelectorAll("[data-pie-chart]");if(0!==t.length||0!==e.length||0!==a.length){var s,n=document.head||document.getElementsByTagName("head")[0],c=document.createElement("style");n.appendChild(c);for(var o=0;o<t.length;o++){var r=JSON.parse(t[o].dataset.lineChart),l=null!=t[o].dataset.options?JSON.parse(t[o].dataset.options):"",u=t[o].dataset.seriesColor;if(t[o].classList.add("cz-line-chart-"+o),null!=u)for(var d=JSON.parse(u),p=0;p<d.colors.length;p++)s="\n              .cz-line-chart-".concat(o," .ct-series:nth-child(").concat(p+1,") .ct-line,\n              .cz-line-chart-").concat(o," .ct-series:nth-child(").concat(p+1,") .ct-point {\n                stroke: ").concat(d.colors[p]," !important;\n              }\n            "),c.appendChild(document.createTextNode(s));new Chartist.Line(t[o],r,l)}for(var h=0;h<e.length;h++){var f=JSON.parse(e[h].dataset.barChart),m=null!=e[h].dataset.options?JSON.parse(e[h].dataset.options):"",v=e[h].dataset.seriesColor;if(e[h].classList.add("cz-bar-chart-"+h),null!=v)for(var y=JSON.parse(v),g=0;g<y.colors.length;g++)s="\n            .cz-bar-chart-".concat(h," .ct-series:nth-child(").concat(g+1,") .ct-bar {\n                stroke: ").concat(y.colors[g]," !important;\n              }\n            "),c.appendChild(document.createTextNode(s));new Chartist.Bar(e[h],f,m)}for(var w=0;w<a.length;w++)!function(t){var e=JSON.parse(a[t].dataset.pieChart),n=a[t].dataset.seriesColor;if(a[t].classList.add("cz-pie-chart-"+t),null!=n)for(var o=JSON.parse(n),r=0;r<o.colors.length;r++)s="\n            .cz-pie-chart-".concat(t," .ct-series:nth-child(").concat(r+1,") .ct-slice-pie {\n                fill: ").concat(o.colors[r]," !important;\n              }\n            "),c.appendChild(document.createTextNode(s));new Chartist.Pie(a[t],e,{labelInterpolationFnc:function(t){return Math.round(t/e.series.reduce(i)*100)+"%"}})}(w)}}};t.init()}(jQuery),function(a){a.kb=a.kb||{},a.kb.userlocation=function(){var r={loadIlces:function(t){var o=this.options;$.ajax({url:"/api/v1/area/children/"+t.id+"?level=2",success:function(t){$(o.ilceDomSelector).find("option").remove(),$(o.districtDomSelector).find("option").remove(),$(o.districtDomSelector).selectpicker("refresh");for(var e=0;e<t.length;e++)$(o.ilceDomSelector).append('<option value="'+t[e].id+'">'+t[e].name+"</option>");var n=(n=t.find(function(t){return!(!o||!o.defaultIlce)&&t.id==o.defaultIlce}))||t[0];$(o.ilceDomSelector).selectpicker("refresh"),r.selectedIlce=n,setTimeout(function(){r.ilcesloaded=t,$(o.ilceDomSelector).selectpicker("val",n.id.toString()),r.loadDistricts(r.selectedIlce)})}})},loadDistricts:function(t){var o=this.options;$.ajax({url:"/api/v1/area/children/"+t.id+"?level=3",success:function(t){$(o.districtDomSelector).find("option").remove();for(var e=0;e<t.length;e++)$(o.districtDomSelector).append('<option value="'+t[e].id+'">'+t[e].name+"</option>");var n=(n=t.find(function(t){return!(!o||!o.defaultDistrict)&&t.id==o.defaultDistrict}))||t[0];r.selectedDistrict=n,r.districtsloaded=t,$(o.districtDomSelector).selectpicker("refresh"),setTimeout(function(){$(o.districtDomSelector).selectpicker("val",n.id.toString()),r.selectedDistrict=n})}})},initAutoComplete:function(){$(".searchBox-semt").autoComplete({resolver:"custom",minLength:3,noneSelectedText:"seçim yapın",formatResult:function(t){return{value:t.id,text:t.text,html:[t.text]}},resolverSettings:{url:"/api/v1/fts",requestThrottling:2e3},events:{search:function(t,e,n){$(".notsearching").addClass("d-none"),$(".searching").removeClass("d-none"),$.ajax("/api/v1/fts",{data:{t:$(n).data("search"),c:$(n).data("category"),q:t}}).done(function(t){$(".searching").addClass("d-none"),$(".notsearching").removeClass("d-none"),e(t)})},searchPost:function(t,e){return a.__searchResultSemt=t,a.dataLayer=a.dataLayer||[],a.dataLayer.push({event:"custom",category:"search",action:"search/autocomplete",label:e.val()}),t.map(function(t){return{id:t.id,text:t.display||""}})}}})},initApp:function(){this.gpsQueryApp=new Vue({el:"#userlocationapp",data:{lat:0,lng:0,list:[],selected:null},methods:{locateSemt:function(){$("#semt-from-device").text("Hesaplıyorum...");var n=this;a.App.GetGeoLocation().then(function(e){e.coords.accuracy<6e3?App.Backend.post("user/findsemt",{lat:e.coords.latitude,lng:e.coords.longitude}).then(function(t){n.list=t,n.lat=e.coords.latitude,n.lng=e.coords.longitude,t.length||($("#semt-from-device").text("Tekrar Deneyin"),$(".searchBox-semt").focus(),alert("Konumunuzdan adrese maalesef ulaşamadık, semtinizi arayın veya listeden seçin."))}).catch(function(t){alert("Konumunuzu maalesef alamadık, teslimat adresini yazmanız yeterli."),$("#semt-from-device").text("Tekrar Deneyin"),$(".searchBox-semt").focus()}):(alert("Konumunuzu yeterli hassasiyette alamadık, semtinizi arayın veya listeden seçin"),$("#semt-from-device").text("Tekrar Deneyin"),$(".searchBox-semt").focus())}).catch(function(t){alert("Konumunuzu maalelesef alamadık, semtinizi arayın veya listeden seçin"),$("#semt-from-device").text("Tekrar Deneyin"),$(".searchBox-semt").focus()}).finally(function(){$("#semt-from-device").removeAttr("disabled")})},go:function(t){a.App.gTag("location","location/set",t.display);var e={};e.lat=r.lat,e.lng=r.lng,e.selectedDistrict=e.selectedDistrict||{},e.selectedDistrict.slug=t.url,$(a).trigger("kb.selectArea.selected",[r,e]),a.kb.done&&a.kb.done(a.kb,e)}}})},init:function(o,t){this.options=o||{},this.options.cityDomSelector=o.cityDomSelector||"#cityselectpicker",this.options.ilceDomSelector=o.ilceDomSelector||"#ilceselectpicker",this.options.districtDomSelector=o.districtDomSelector||"#districtselectpicker";var e={style:"",styleBase:"form-control",width:"100%"};$(this.options.cityDomSelector).selectpicker(e),$(this.options.ilceDomSelector).selectpicker(e),$(o.districtDomSelector).selectpicker(e),$(o.districtDomSelector).on("changed.bs.select",function(t,e,n,o){e=r.districtsloaded[e];r.selectedDistrict=e,$(a).trigger("kb.userloction.districtselected",[r])}),$(this.options.cityDomSelector).on("changed.bs.select",function(t,e,n,o){e=r.citiesloaded[e];e&&(r.selectedCity=e,r.loadIlces(e))}),$(this.options.ilceDomSelector).on("changed.bs.select",function(t,e,n,o){e=r.ilcesloaded[e];e&&(r.selectedIlce=e,r.loadDistricts(e))}),r.citiesloaded||$.ajax({url:"/api/v1/area/children",success:function(t){var e=[];e.push({id:0,name:"Şehir Seçin",slug:""}),e=e.concat(t),r.citiesloaded=e;for(var n=0;n<e.length;n++)$(o.cityDomSelector).append('<option value="'+e[n].id+'">'+e[n].name+"</option>");t=(t=e.find(function(t){return!(!o||!o.defaultCity)&&t.id==o.defaultCity}))||e[0];$(o.cityDomSelector).selectpicker("refresh"),$(o.cityDomSelector).selectpicker("val",t.id.toString()),0!=(r.selectedCity=t).id&&r.loadIlces(t)}}),this.initAutoComplete(),this.initApp(),t&&t()}};return r},a.kb.selectArea=function(o,t){var r,i=this;(t=t||{}).defaultCity=a.__useraddr?a.__useraddr.level1Id:void 0,t.defaultIlce=a.__useraddr?a.__useraddr.level2Id:void 0,t.defaultDistrict=a.__useraddr?a.__useraddr.level3Id:void 0,t.showWarning=t.showWarning||!1,this.done=o,i.areainited?$("#areaModal").modal("show"):(r=a.kb.userlocation(),i.areainited=!0,r.init(t,function(){t.msg?($("#exploreAreaMsg").show(),$("#exploreAreaMsg").html(t.msg||"")):t.showWarning?($("#exploreAreaMsg").show(),$("#exploreAreaMsg").html("Kasaplar ve ürün fiyatları için lütfen semtinizi seçin")):$("#exploreAreaMsg").hide(),$("#areaModal").modal(),$("#exploreAreaButton").click(function(){a.App.gTag("location","location/set",r.selectedCity.name+"/"+r.selectedIlce.name+"/"+r.selectedDistrict.name),$(a).trigger("kb.selectArea.selected",[i,r]),o&&o(i,r)}),$(".searchBox-semt").on("autocomplete.select",function(t,e){var n=a.__searchResultSemt.find(function(t){return t.id==e.id});a.App.gTag("location","location/set",n.display),r.selectedDistrict=r.selectedDistrict||{},r.selectedDistrict.slug=n.url,$(a).trigger("kb.selectArea.selected",[i,r]),o&&o(i,r)}),$(a).on("kb.selectArea.searched",function(t,e){o&&o(t,e)}),$("#areaModal").on("shown.bs.modal",function(){r.gpsQueryApp.list=[],$(".searchBox-semt").focus()}),$("#areaModal").on("hide.bs.modal",function(){r.gpsQueryApp.list=[]})}))},a.kb.hide=function(){$("#areaModal").modal("hide")}}(window);