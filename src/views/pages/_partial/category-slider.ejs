<% header = typeof(header) == 'undefined' ? true: header %>
<% titles = typeof(titles) == 'undefined' ? true: titles %>
<% selected = typeof(selected) == 'undefined' ? null: selected %>
<% mode = typeof(mode) == 'undefined' ? 'list': mode %>
<% idprefix = typeof(idprefix) == 'undefined' ? '': idprefix %>

<% if (header) { %>
<div class="bg-secondary d-flex flex-nowrap justify-content-between align-items-center">
    <a class="d-block py-3 pl-3" href="<%=allUrl%>">
        <h3 class="h6 mb-0"><%=title%></h3>
    </a>
    <a class="d-none d-md-block btn btn-sm" href="<%=allUrl%>">Tümü »</a>
</div>

<% } %>

<%if (mode=='list') { %>
<div class="table-responsive" data-simplebar>
    <div class="d-flex <%=titles ? 'pb-2': 'pb-0'%>">
        <% viewCats.forEach(cat => { %>
        <% var reyonlar = (__categories.filter(p=>p.type == cat && p.status == 'active')) %>
        <% for(var c=0; c< reyonlar.length; c++) {%>
        <div class="<%=titles ? 'mr-2': 'mr-0'%>">
            <div id="<%=idprefix%><%=reyonlar[c].slug%>"
                class="item-slider item-slider-sm <%= selected ? (selected == reyonlar[c].slug ? 'item-slider-selected': 'item-slider-unselected') : ''%>">
                <%subUrl = reyonlar[c].type == 'resource' ? 'et-yemekleri/':'' %>
                <div class="card product-card pb-0  ">
                    <a href="<%= `/${subUrl}${reyonlar[c].slug}`%>"><img
                            src="<%=`${__req.helper.imgUrl('category-photos', reyonlar[c].slug, 'thumbnail', true, 'list')}`%>"
                            alt="<%=reyonlar[c].name%>"></a>
                    <% if (titles) {%>
                    <div class="card-body pb-0 mb-0 text-center">
                        <h3 class="product-title mb-0 font-size-md"><a
                                href="<%= `/${subUrl}${reyonlar[c].slug}`%>"><%= reyonlar[c].listTitle || reyonlar[c].name %></a>
                        </h3>
                    </div>
                    <% } %>
                </div>
            </div>
        </div>
        <%}%>
        <%})%>
    </div>
</div>
<div class="d-xs-block border-bottom d-md-none text-center mb-3">
    <a class="btn rounded-0 btn-sm btn-secondary" href="<%=allUrl%>">Tümü

        <i class="czi-arrow-right font-size-xs align-middle ml-1"></i>
    </a>
</div>
<%} else if (mode=='view') { %>
<div class="row">


    <% var reyonlar = (__categories.filter(p=>p.status == 'active')) %>
    <% reyonlar = reyonlar.slice(0,6) %>
    <% for(var c=0; c < reyonlar.length; c++) {%>

    <div class="col-md-2 col-6">

        <div class="card product-card">



            <a href="<%= `/${reyonlar[c].slug}`%>"><img
                    src="<%=`${__req.helper.imgUrl('category-photos', reyonlar[c].slug, 'thumbnail', true, 'list')}`%>"
                    alt="<%=reyonlar[c].name%>"></a>

            <% if (titles) { %>
            <div class="card-body text-center">
                <h3 class="product-title mb-1 font-size-md"><a
                        href="<%= `/${reyonlar[c].slug}`%>"><%= reyonlar[c].listTitle || reyonlar[c].name %></a>
                </h3>
            </div>



            <%}%>
                    </div>



                </div>
            <% } %>
     




        </div>
        <div class="d-xs-block border-bottom d-md-none text-center mb-3">
            <a class="btn rounded-0 btn-sm btn-secondary" href="<%=allUrl%>">Tümü »
            </a>
        </div>
        <%} else { %>
        <div id="sc" class="table-responsive" data-simplebar>
            <div class="d-flex pb-2">
                <% var allAdded = false; %>
                <% viewCats.forEach(cat => { %>
                <% var reyonlar = (__categories.filter(p=>p.type == cat && p.status == 'active')) %>

                <% for(var c=0; c< reyonlar.length; c++) {%>


                <div id="cat-item-<%=reyonlar[c].slug%>"
                    class="mr-2 <%= selected ? (selected == reyonlar[c].slug ? 'item-slider-selected': 'item-slider-unselected') : ''%>">
                    <%subUrl = reyonlar[c].type == 'resource' ? 'et-yemekleri/':'' %>


                    <%if (!allAdded) { %>
                    <%allAdded=true%>

                    <%}%>
                    
                        <a  class="text-center btn rounded-0 btn-secondary  text-nowrap" href="<%= `/${subUrl}${reyonlar[c].slug}?go=1#items`%>">


                    <span>
                        <%= reyonlar[c].listTitle || reyonlar[c].name %>

                    </span>
                    </a>



                </div>




                <%}%>
        <%})%>
            </div>
        </div>

        <% } %>