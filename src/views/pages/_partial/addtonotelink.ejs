<% if (typeof(forceLink) == 'undefined' && resource.otherProducts.length > 0) { %>
<% 

var products = [resource.product].concat(resource.otherProducts); 
var alternatives = [];

%><% products.forEach(p=> { %>

<% var baseUrl = `/${p.slug}?r=${resource.id}&autoNote=1&hideproduct=1`  %>
<% if (typeof(disableSlider) != 'undefined') baseUrl += '&disableSlider=1' %>

<% alternatives.push({ 
        src: `${__req.helper.imgUrl('product-photos', p.slug)}`,
        name:  p.name ,
        desc: (resource.getSettingsByRefId(p.id) || {}).desc,
        link: baseUrl
      }) %>

<% }) %>

<% resource.categories.forEach(c=> { %>

<%

%>

<% }) %>

javascript:window.App.FoodAlternativesApp.show(<%=JSON.stringify(alternatives)%>, <%='"' + resource.title + '"'%>)
<%} else {%>
<% var baseUrl = `/${resource.product.slug}?r=${resource.id}&autoNote=1`  %>
<% if (typeof(disableSlider) != 'undefined') baseUrl += '&disableSlider=1' %>
<%=baseUrl %>
<%}%>