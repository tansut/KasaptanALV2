{"version":3,"sources":["../src/routes/admin/product.ts"],"names":[],"mappings":"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","file":"product.js","sourcesContent":["import { ApiRouter, ViewRouter } from '../../lib/router';\nimport * as express from \"express\";\nimport * as maps from \"@google/maps\"\nimport ProductModel from '../../db/models/product';\nimport moment = require('moment');\nimport { Auth } from '../../lib/common';\nimport Area from '../../db/models/area';\nimport Resource from '../../db/models/resource';\nimport { parse } from 'querystring';\nimport { threadId } from 'worker_threads';\nimport Helper from '../../lib/helper';\nimport Category from '../../db/models/category';\nimport ProductCategory from '../../db/models/productcategory';\nimport Redirect from '../../db/models/redirect';\nimport { CacheManager } from '../../lib/cache';\n\nexport default class Route extends ViewRouter {\n\n    product: ProductModel;\n\n    @Auth.Anonymous()\n    async listViewRoute() {\n\n        let data = await ProductModel.findAll({\n            order: [\"tag1\", \"name\"],\n            include: [{\n                model: ProductCategory,\n                include: [Category]\n            }]\n        })\n\n        this.res.render('pages/admin/product.list.ejs', this.viewData({ products: data }))\n    }\n\n    async getResources(product: ProductModel) {\n        return await Resource.findAll({\n            where: {\n                type: \"product-photos\",\n                ref1: product.id\n            },\n            order: [[\"displayOrder\", \"DESC\"], [\"updatedOn\", \"DESC\"]]\n        })\n    }\n\n    async getCategories() {\n        return await Category.findAll({\n            where: {\n                type: ['reyon', 'list', 'home']\n            }\n        })\n    }\n\n    async getProduct(slug: string) {\n        return await ProductModel.findOne({\n            include: [{\n                all: true\n            }\n            ], where: { slug: slug }\n        });\n    }\n\n    getProductCategory(categoryid: number) {\n        let productCategory = this.product.categories.find(c => c.categoryid == categoryid)\n        return productCategory ? {\n            subcategoryid: productCategory.subcategoryid,\n            displayOrder: productCategory.displayOrder,\n            enabled: true,\n            productCategory: productCategory\n        } : {\n                displayOrder: \"\",\n                enabled: false,\n                subcategoryid: \"\"\n            }\n    }\n\n    @Auth.Anonymous()\n    async editViewRoute() {\n        if (!this.req.params.product) {\n            return this.next();\n        }\n        let product = this.product = await this.getProduct(this.req.params.product);\n        let resources = await this.getResources(product)\n        let categories = await this.getCategories();\n        this.res.render('pages/admin/product.edit.ejs', this.viewData({ getProductCategory: this.getProductCategory, categories: categories, images: resources, product: product }))\n    }\n\n    async saveSeoRoute() {\n\n    }\n\n    @Auth.Anonymous()\n    async saveRoute() {\n\n        if (!this.req.params.product) {\n            return this.next();\n        }\n\n        this.product = await this.getProduct(this.req.params.product);\n        let resources = await this.getResources(this.product)\n        let categories = await this.getCategories();\n        let pSlug = this.product.slug;\n\n        if (this.req.body.save == \"true\") {\n            if (this.req.user.hasRole('admin')) {\n                this.product.slug = this.req.body.slug;\n                this.product.name = this.req.body.name;\n                this.product.tag1 = this.req.body.tag1;\n                this.product.tag2 = this.req.body.tag2;\n                this.product.keywords = this.req.body.keywords;\n                this.product.shortdesc = this.req.body.description;\n                this.product.notePlaceholder = this.req.body.notePlaceholder;\n                this.product.featuresText = this.req.body.featuresText;\n                this.product.butcherNote = this.req.body.butcherNote;\n            }\n            this.product.mddesc = this.req.body.mddesc;\n            \n            if (pSlug != this.product.slug) {\n                let redirToOld = this.req.__redirects['/' + pSlug];\n                let redirToNew = this.req.__redirects['/' + this.product.slug];\n                if (redirToNew)\n                    throw new Error(this.product.slug + ' yÃ¶nlendirmede, eklenemez');\n                if (redirToOld) {\n                    let r = await Redirect.findOne({\n                        where: {\n                            fromUrl: '/' + pSlug\n                        }\n                    });\n                    r.toUrl = '/' + this.product.slug;\n                    r.desc = 'updated for ' + this.product.name;\n                    await r.save();  \n                } else {\n                    let r = new Redirect({\n                        fromUrl: '/' + pSlug,\n                        toUrl: '/' + this.product.slug,\n                        enabled: true,\n                        desc: 'added for ' + this.product.name\n                    })\n                    await r.save();\n                }\n            }\n            await this.product.save();\n            \n        } else if (this.req.body.saveseo == \"true\") {\n            this.product.pageTitle = this.req.body.pagetitle;\n            this.product.pageDescription = this.req.body.pagedesc;\n            await this.product.save();\n        } else if (this.req.body.saveunits == \"true\" && this.req.user.hasRole('admin')) {\n            this.product.unit1 = this.req.body.unit1;\n            this.product.unit1desc = this.req.body.unit1desc;\n            this.product.unit1note = this.req.body.unit1note;\n\n            this.product.unit1title = this.req.body.unit1title;\n            this.product.unit2title = this.req.body.unit2title;\n            this.product.unit3title = this.req.body.unit3title;\n\n            this.product.unit1weight = this.req.body.unit1weight;\n            this.product.unit2weight = this.req.body.unit2weight;\n            this.product.unit3weight = this.req.body.unit3weight;\n\n\n            this.product.unit2note = this.req.body.unit2note;\n            this.product.unit3note = this.req.body.unit3note;\n            this.product.unit2 = this.req.body.unit2;\n            this.product.unit2desc = this.req.body.unit2desc;\n            this.product.unit3 = this.req.body.unit3;\n            this.product.unit3desc = this.req.body.unit3desc;\n\n\n            this.product.unit1kgRatio = parseFloat(this.req.body.unit1kgRatio);\n            this.product.unit2kgRatio = parseFloat(this.req.body.unit2kgRatio);\n            this.product.unit3kgRatio = parseFloat(this.req.body.unit3kgRatio);\n\n            this.product.unit1def = parseFloat(this.req.body.unit1def);\n            this.product.unit2def = parseFloat(this.req.body.unit2def);\n            this.product.unit3def = parseFloat(this.req.body.unit3def);\n\n            this.product.unit1min = parseFloat(this.req.body.unit1min);\n            this.product.unit2min = parseFloat(this.req.body.unit2min);\n            this.product.unit3min = parseFloat(this.req.body.unit3min);\n\n            this.product.unit1max = parseFloat(this.req.body.unit1max);\n            this.product.unit2max = parseFloat(this.req.body.unit2max);\n            this.product.unit3max = parseFloat(this.req.body.unit3max);\n\n            this.product.unit1step = parseFloat(this.req.body.unit1step);\n            this.product.unit2step = parseFloat(this.req.body.unit2step);\n            this.product.unit3step = parseFloat(this.req.body.unit3step);\n\n\n            this.product.unit1perPerson = parseFloat(this.req.body.unit1perPerson);\n            this.product.unit2perPerson = parseFloat(this.req.body.unit2perPerson);\n            this.product.unit3perPerson = parseFloat(this.req.body.unit3perPerson);\n\n\n\n            this.product.unit1Order = parseInt(this.req.body.unit1Order);\n            this.product.unit2Order = parseInt(this.req.body.unit2Order);\n            this.product.unit3Order = parseInt(this.req.body.unit3Order);\n\n            this.product.unit1WeigthNote = this.req.body.unit1WeigthNote;\n            this.product.unit2WeigthNote = this.req.body.unit2WeigthNote;\n            this.product.unit3WeigthNote = this.req.body.unit3WeigthNote;\n\n            this.product.unit1ButcherNote = this.req.body.unit1ButcherNote;\n            this.product.unit2ButcherNote = this.req.body.unit2ButcherNote;\n            this.product.unit3ButcherNote = this.req.body.unit3ButcherNote;\n\n        \n\n            // this.product.defaultUnit = parseInt(this.req.body.defaultUnit);\n            // this.product.defaultAmount = parseFloat(this.req.body.defaultAmount);\n\n            //this.product.perPersonKg = parseFloat(this.req.body.perPersonKg);\n\n\n            await this.product.save();\n        } else if (this.req.body.CopyUnit &&  this.req.user.hasRole('admin')) {\n            let productToCopyId = parseInt(this.req.body['copy' + this.req.body.CopyUnit]);\n            let productToCopy = await ProductModel.findByPk(productToCopyId);\n            Object.getOwnPropertyNames(productToCopy[\"rawAttributes\"]).forEach(pn => {\n                if (pn && pn.includes(this.req.body.CopyUnit)) {\n                    this.product[pn] = productToCopy[pn];\n                }\n            })\n            await this.product.save();\n\n        } else if (this.req.body.updatecategory == \"true\" && this.req.user.hasRole('admin')) {\n            let categoryid = parseInt(this.req.body.categoryid);\n            //let productCategory = this.getProductCategory(parseInt(this.req.body.categoryid));\n            await ProductCategory.destroy({\n                where: {\n                    productid: this.product.id,\n                    categoryid: categoryid\n                }\n            })\n            if (this.req.body.categoryenabled == \"on\") {\n                let newItem = new ProductCategory();\n                newItem.productid = this.product.id;\n                newItem.categoryid = categoryid;\n\n                newItem.displayOrder = (this.req.body.categorydisplayorder ? parseInt(this.req.body.categorydisplayorder) : 0)\n                newItem.subcategoryid = (this.req.body.categorysubcategoryid ? parseInt(this.req.body.categorysubcategoryid) : null)\n                await newItem.save();\n            }\n            this.product = await this.getProduct(this.req.params.product);\n        }\n        CacheManager.clear();\n        if (pSlug != this.product.slug) {\n            this.res.redirect(\"/pages/admin/product/\" + this.product.slug)\n        } else  this.res.render('pages/admin/product.edit.ejs', this.viewData({ categories: categories, images: resources, product: this.product }))\n    }\n\n\n\n    static SetRoutes(router: express.Router) {\n        router.get(\"/product/list\", Route.BindRequest(Route.prototype.listViewRoute));\n        router.get(\"/product/:product\", Route.BindRequest(Route.prototype.editViewRoute));\n        router.post(\"/product/:product\", Route.BindRequest(Route.prototype.saveRoute));\n        router.post(\"/product/:product/saveseo\", Route.BindRequest(Route.prototype.saveSeoRoute));\n    }\n}\n\n"],"sourceRoot":"../../../src/"}