{"version":3,"sources":["../src/lib/helper.ts"],"names":[],"mappings":"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","file":"helper.js","sourcesContent":["import * as Jimp2 from 'jimp'\nimport * as path from \"path\"\nimport * as numeral from 'numeral';\nimport moment = require('moment');\nimport { AppRequest } from './http';\nimport config from '../config';\nimport { GeoLocation } from '../models/geo';\n\nexport default class Helper {\n\n    static foodCategories = [{\n        slug: 'yemekler',\n        name: 'Yemekler'\n    }, {\n        slug: 'tarifler',\n        name: 'Tarifler'\n    }]\n\n    static nvl(val, def = 0) {\n        return parseInt(val) == NaN ? def: parseInt(val);\n    }\n\n    static parseFloat(val) {\n        return parseFloat(val.replace(/,/g, ''));\n    }\n\n\n    static distance(p1: GeoLocation, p2: GeoLocation) {\n        return Helper._distance(p1.coordinates[0], p1.coordinates[1], p2.coordinates[0], p2.coordinates[1], 'K')\n    }\n\n    static _distance(lat1, lon1, lat2, lon2, unit) {\n        if ((lat1 == lat2) && (lon1 == lon2)) {\n            return 0;\n        }\n        else {\n            var radlat1 = Math.PI * lat1/180;\n            var radlat2 = Math.PI * lat2/180;\n            var theta = lon1-lon2;\n            var radtheta = Math.PI * theta/180;\n            var dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);\n            if (dist > 1) {\n                dist = 1;\n            }\n            dist = Math.acos(dist);\n            dist = dist * 180/Math.PI;\n            dist = dist * 60 * 1.1515;\n            if (unit==\"K\") { dist = dist * 1.609344 }\n            if (unit==\"N\") { dist = dist * 0.8684 }\n            return dist;\n        }\n    }\n\n    static asCurrency(n: number) {\n        return Number(n.toFixed(2));\n    }\n\n    static isToday(date): boolean {\n        return (Helper.Now().toDateString() === date.toDateString());\n    }\n\n    static Tomorrow(): Date {\n        return new Date(Helper.Now().getTime() + 24 * 60 * 60 * 1000)\n    }\n\n    static NextDay(date) {\n        return new Date(date.getTime() + 24 * 60 * 60 * 1000)\n    }\n\n    static isTomorrow(date): boolean {\n        return (this.NextDay(Helper.Now()).toDateString() === date.toDateString());\n    }\n\n    static Now() {\n        let now = new Date();\n        let res = moment(now).add('minutes', now.getTimezoneOffset()).add('hour', 3);\n        return res.toDate();\n    }\n\n    static shuffle(array) {\n        var currentIndex = array.length, temporaryValue, randomIndex;\n\n        // While there remain elements to shuffle...\n        while (0 !== currentIndex) {\n\n            // Pick a remaining element...\n            randomIndex = Math.floor(Math.random() * currentIndex);\n            currentIndex -= 1;\n\n            // And swap it with the current element.\n            temporaryValue = array[currentIndex];\n            array[currentIndex] = array[randomIndex];\n            array[randomIndex] = temporaryValue;\n        }\n\n        return array;\n    }\n\n\n    static boolStr(val: boolean) {\n        return val ? 'Evet' : 'Hayır'\n    }\n\n\n    static formatDate(date: Date, useTime: boolean = false) {\n        if (date) {\n        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };\n        return date.toLocaleDateString('tr-TR', options);\n        } else return ''\n    }\n\n    static UtcNow() {\n        return moment.utc().toDate();\n    }\n\n    static splitCurrency(n: number) {\n        let absn = Math.abs(n)\n        return {\n            val: Math.trunc(n),\n            krs: (Number(absn.toFixed(2)) - Math.trunc(absn)) * 100\n        }\n    }\n\n    static formatCurrency(n: number) {\n        let split = Helper.splitCurrency(n)\n        return {\n            val: numeral(split.val).format('0,0'),\n            krs: numeral(split.krs).format('00')\n        }\n    }\n\n    static formattedCurrency(n: number, symbol: string = 'TL') {\n        let parts = Helper.splitCurrency(Helper.asCurrency(n));\n        if (parts.krs <= 0) return numeral(parts.val).format('0,0') + 'TL'\n        else return numeral(parts.val).format('0,0') + '.' + numeral(parts.krs).format('0,0') + 'TL'\n    }\n\n    static getPhoneNumber(phone: string) {\n        //05326274151\n        let f = phone.replace(' ', '');\n        if (f.length == 11 && f[0] == '0')\n            f = f.slice(1);\n        return f;\n    }\n\n    static ResourcePaths = {\n        \"butcher-google-photos\": \"kasap-resimleri\",\n        \"product-photos\": \"urun-resimleri\",\n        \"category-photos\": \"kategori-resimleri\"\n    }\n\n    static getRandomInt(max) {\n        return Math.floor(Math.random() * Math.floor(max));\n    }\n\n    static toLower(s: string) {\n        var letters = { \"İ\": \"i\", \"I\": \"ı\", \"Ş\": \"ş\", \"Ğ\": \"ğ\", \"Ü\": \"ü\", \"Ö\": \"ö\", \"Ç\": \"ç\" };\n        s = s.replace(/(([İIŞĞÜÇÖ]))/g, function (letter) { return letters[letter]; })\n        return s.toLowerCase();\n        //return s.toLocaleLowerCase().replace(new RegExp(\"i\", 'g'), \"ı\").replace(new RegExp(\"i̇\", 'g'), \"i\");\n    }\n\n    static capitlize(text: string) {\n        return this.toLower(text)\n            .split(' ')\n            .map((s) => s.charAt(0).toUpperCase() + s.substring(1))\n            .join(' ');\n    }\n\n    static normalizePhoto(url: string, thumbnail?: string) {\n        return Jimp2.read(path.resolve(url))\n            .then(image => {\n                let _img = image.resize(1080, Jimp2.AUTO);\n                \n                return new Promise((resolve, reject) => {\n                    _img.write(path.resolve(url), (err) => {\n                        if (thumbnail) {\n                            _img = _img.cover(300, 300);\n\n                            _img.write(path.resolve(thumbnail), (err) => {\n                                err ? reject(err) : resolve();\n                            })\n                        }\n                        else err ? reject(err) : resolve();\n                    })\n                })\n\n                // return _img.getBufferAsync(\"image/jpeg\").then(buff => {\n                //     this.res.set(\"jpeg\")\n                //     this.res.send(new Buffer(buff))\n                // })  \n            })\n    }\n\n    static slugify(string) {\n        const a = 'ıàáâäæãåāăąçćčđďèéêëēėęěğǵḧîïíīįìłḿñńǹňôöòóœøōõṕŕřßśšşșťțûüùúūǘůűųẃẍÿýžźż·/_,:;'\n        const b = 'iaaaaaaaaaacccddeeeeeeeegghiiiiiilmnnnnooooooooprrsssssttuuuuuuuuuwxyyzzz------'\n        const p = new RegExp(a.split('').join('|'), 'g')\n\n        return string.toString().toLowerCase()\n            .replace(/\\s+/g, '-') // Replace spaces with -\n            .replace(p, c => b.charAt(a.indexOf(c))) // Replace special characters\n            .replace(/&/g, '-') // Replace & with 'and'\n            .replace(/[^\\w\\-]+/g, '') // Remove all non-word characters\n            .replace(/\\-\\-+/g, '-') // Replace multiple - with single -\n            .replace(/^-+/, '') // Trim - from start of text\n            .replace(/-+$/, '') // Trim - from end of text\n    }\n}"],"sourceRoot":"../../src/"}