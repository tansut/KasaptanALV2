{"version":3,"sources":["../src/db/models/product.ts"],"names":[],"mappings":"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","file":"product.js","sourcesContent":["import { Table, Column, DataType, Model, HasMany, CreatedAt, UpdatedAt, DeletedAt, Unique, Default, AllowNull, ForeignKey, BelongsTo } from 'sequelize-typescript';\nimport BaseModel from \"./basemodel\"\nimport Helper from '../../lib/helper';\nimport ProductCategory from './productcategory';\nimport Category from './category';\nimport ButcherProduct from './butcherproduct';\nimport Resource from './resource';\nimport { Op, QueryTypes } from 'sequelize';\nimport { AdakProductManager } from '../../lib/common';\n\nexport enum ProductType {\n    generic = 'generic',\n    kurban = 'kurban',\n    adak = 'adak'\n}\n\n@Table({\n    tableName: \"Products\",\n    indexes: [{\n        name: \"slug_idx\",\n        fields: [\"slug\"],\n        unique: true\n    },\n    { type: 'FULLTEXT', name: 'product_fts', fields: ['name', 'shortdesc', 'slug', 'keywords'] }]\n})\n\n\n\nclass Product extends BaseModel<Product> {\n    @Column({\n        allowNull: false,\n    })\n    name: string;\n\n    @Column\n    keywords: string;    \n\n    @Column({\n        type: DataType.TEXT\n    })\n    producttypedatajson: string\n\n    get asAdak(): AdakProductManager {\n        let obj = this.producttypedata || {};\n        return Object.assign(new AdakProductManager(), obj)        \n    } \n\n    get producttypedata(): any {\n        return this.producttypedatajson ? JSON.parse(this.getDataValue('producttypedatajson')) : null\n    }\n\n    set producttypedata(value: any) {\n        this.setDataValue('producttypedatajson', JSON.stringify(value));\n    }    \n\n    get generatedDesc() {\n        let start = \"\";\n        if (this.shortdesc)\n        start = `${this.name}: ${this.shortdesc}.`\n        else start = `${this.name} kasaptanAl.com'da.` ;\n        let availUnits = this.availableUnits;\n\n        let units = availUnits.length < 3 ? this.availableUnits.join(' veya ').toLocaleLowerCase():\n        this.availableUnits.slice(0, -1).join(', ').toLocaleLowerCase() + ' veya ' + this.availableUnits[this.availableUnits.length-1].toLocaleLowerCase()\n        ;\n\n        let result = `${start} En iyi ${units} ${this.name} fiyat teklifleriyle online kasaplarımızdan satın alın, kapınıza gelsin!`\n\n        return result;\n    }\n\n    \n\n    get availableUnits() {\n        let res = [];\n        this.unit1 && res.push(this.unit1title || this.unit1);\n        this.unit2 && res.push(this.unit2title || this.unit2);\n        this.unit3 && res.push(this.unit3title || this.unit3);\n        this.unit4 && res.push(this.unit4title || this.unit4);\n        this.unit5 && res.push(this.unit5title || this.unit5);\n        return res;\n    }\n\n    @HasMany(() => ProductCategory, {\n        sourceKey: \"id\",\n        foreignKey: \"productid\"\n    })\n    categories: ProductCategory[];\n\n    @HasMany(() => ButcherProduct, {\n        sourceKey: \"id\",\n        foreignKey: \"productid\"\n    })\n    butchers: ButcherProduct[];\n\n    @Column({\n        allowNull: true,\n    })\n    tag1: string;\n\n    @Column({\n        allowNull: false,\n    })\n    slug: string;\n\n\n    @Column({\n        allowNull: true,\n    })\n    tag2: string;\n\n    @Column({\n        allowNull: true,\n    })\n    tag3: string;\n\n    @Column({\n        allowNull: true,\n        type: DataType.TEXT\n    })\n    shortdesc: string;\n\n    @Column({\n        allowNull: true,\n        type: DataType.TEXT\n    })\n    notePlaceholder: string;\n\n    @Column({\n        allowNull: true,\n        type: DataType.TEXT\n    })\n    featuresText: string;\n    \n\n    @Column({\n        allowNull: true,\n    })\n    pageTitle: string;\n\n    @Column({\n        allowNull: true,\n    })\n    pageDescription: string;\n\n    \n\n    @Column({\n        allowNull: true,\n        type: DataType.TEXT\n    })\n    mddesc: string;    \n\n    @Column({\n        allowNull: true,\n        type: DataType.TEXT\n    })\n    butcherNote: string;\n\n\n    @Column({\n        allowNull: true,\n    })\n    displayOrder: number;\n\n    @Column({\n        allowNull: true,\n    })\n    unit1: string;\n\n    @Column({\n        allowNull: true,\n    })\n    unit2: string;\n\n    @Column({\n        allowNull: true,\n    })\n    unit3: string;\n\n    @Column({\n        allowNull: true,\n    })\n    unit4: string;\n\n    @Column({\n        allowNull: true,\n    })\n    unit5: string;\n\n    @Column({\n        allowNull: true,\n    })\n    unit1title: string;\n\n    @Column({\n        allowNull: true,\n    })\n    unit2title: string;\n\n    @Column({\n        allowNull: true,\n    })\n    unit3title: string;\n\n    @Column({\n        allowNull: true,\n    })\n    unit4title: string;\n\n    @Column({\n        allowNull: true,\n    })\n    unit5title: string;\n\n    @Column({\n        allowNull: true,\n    })\n    unit1weight: string;\n\n    @Column({\n        allowNull: true,\n    })\n    unit2weight: string;\n\n    @Column({\n        allowNull: true,\n    })\n    unit3weight: string;\n\n    @Column({\n        allowNull: true,\n    })\n    unit4weight: string;\n\n    @Column({\n        allowNull: true,\n    })\n    unit5weight: string;\n\n\n    @Column({\n        allowNull: true,\n        type: DataType.TEXT\n    })\n    unit1desc: string;\n\n    @Column({\n        allowNull: true,\n        type: DataType.TEXT\n    })\n    unit2desc: string;\n\n    @Column({\n        allowNull: true,\n        type: DataType.TEXT\n    })\n    unit3desc: string;\n\n    @Column({\n        allowNull: true,\n        type: DataType.TEXT\n    })\n    unit1note: string;\n\n    @Column({\n        allowNull: true,\n        type: DataType.TEXT\n    })\n    unit1ButcherNote: string;\n\n    @Column({\n        allowNull: true,\n        type: DataType.TEXT\n    })\n    unit2ButcherNote: string;\n\n    @Column({\n        allowNull: true,\n        type: DataType.TEXT\n    })\n    unit3ButcherNote: string;\n\n    @Column({\n        allowNull: true,\n        type: DataType.TEXT\n    })\n    unit4ButcherNote: string;\n\n    @Column({\n        allowNull: true,\n        type: DataType.TEXT\n    })\n    unit5ButcherNote: string;\n\n\n    @Column({\n        allowNull: true,\n        type: DataType.TEXT\n    })\n    unit2note: string;\n\n    @Column({\n        allowNull: true,\n        type: DataType.TEXT\n    })\n    unit3note: string;\n\n\n    @Column({\n        allowNull: true,\n        type: DataType.TEXT\n    })\n    unit4desc: string;\n\n    @Column({\n        allowNull: true,\n        type: DataType.TEXT\n    })\n    unit5desc: string;\n\n    @Column({\n        allowNull: true\n    })\n    unit1WeigthNote: string;\n\n    @Column({\n        allowNull: true\n    })\n    unit2WeigthNote: string;    \n\n    @Column({\n        allowNull: true\n    })\n    unit3WeigthNote: string;\n\n    @Column({\n        allowNull: true\n    })\n    unit4WeigthNote: string;\n\n    @Column({\n        allowNull: true\n    })\n    unit5WeigthNote: string;    \n\n    // @Column({\n    //     allowNull: false,\n    //     defaultValue: 1\n    // })\n    // defaultUnit: number;  \n    \n    // @Column({\n    //     allowNull: false,\n    //     defaultValue: 1,\n    //     type: DataType.DECIMAL(8, 3)\n    // })\n    // defaultAmount: number;\n\n\n\n\n    @Column({\n        allowNull: false,\n        defaultValue: 4.7,\n        type: DataType.DECIMAL(4, 2)\n    })\n    ratingValue: number;    \n    \n    @Column({\n        allowNull: false,\n        defaultValue: 1\n    })\n    reviewCount: number;     \n    \n\n    @Column({\n        allowNull: false,\n        defaultValue: 1,\n        type: DataType.DECIMAL(8, 3)\n    })\n    unit1def: number;\n\n    @Column({\n        allowNull: false,\n        defaultValue: 1,\n        type: DataType.DECIMAL(8, 3)\n    })\n    unit2def: number;    \n\n    @Column({\n        allowNull: false,\n        defaultValue: 1,\n        type: DataType.DECIMAL(8, 3)\n    })\n    unit3def: number;\n\n    @Column({\n        allowNull: false,\n        defaultValue: 1,\n        type: DataType.DECIMAL(8, 3)\n    })\n    unit1min: number;        \n\n    @Column({\n        allowNull: false,\n        defaultValue: 1,\n        type: DataType.DECIMAL(8, 3)\n    })\n    unit2min: number;   \n    \n    @Column({\n        allowNull: false,\n        defaultValue: 1,\n        type: DataType.DECIMAL(8, 3)\n    })\n    unit3min: number;       \n\n    @Column({\n        allowNull: false,\n        defaultValue: 5,\n        type: DataType.DECIMAL(8, 3)\n    })\n    unit1max: number;        \n\n    @Column({\n        allowNull: false,\n        defaultValue: 5, \n        type: DataType.DECIMAL(8, 3)\n    })\n    unit2max: number;   \n    \n    @Column({ \n        allowNull: false,\n        defaultValue: 5,\n        type: DataType.DECIMAL(8, 3)\n    })\n    unit3max: number; \n    \n    @Column({\n        allowNull: false,\n        defaultValue: 1,\n        type: DataType.DECIMAL(8, 3)\n    })\n    unit1step: number;        \n\n    @Column({\n        allowNull: false,\n        defaultValue: 1,\n        type: DataType.DECIMAL(8, 3)\n    })\n    unit2step: number;   \n    \n    @Column({\n        allowNull: false,\n        defaultValue: 1,\n        type: DataType.DECIMAL(8, 3)\n    })\n    unit3step: number;   \n    \n    @Column({\n        allowNull: false,\n        defaultValue: 0.25,\n        type: DataType.DECIMAL(8, 3)\n    })\n    unit1perPerson: number;        \n\n    @Column({\n        allowNull: false,\n        defaultValue: 0.25,\n        type: DataType.DECIMAL(8, 3)\n    })\n    unit2perPerson: number;   \n    \n    @Column({\n        allowNull: false,\n        defaultValue: 0.25,\n        type: DataType.DECIMAL(8, 3)\n    })\n    unit3perPerson: number;      \n    \n    @Column({\n        allowNull: false,\n        defaultValue: 0\n    })\n    unit1Order: number;     \n\n    @Column({\n        allowNull: false,\n        defaultValue: 0\n    })\n    unit2Order: number;    \n    \n    @Column({\n        allowNull: false,\n        defaultValue: 0\n    })\n    unit3Order: number;       \n    \n    @Column({\n        allowNull: false,\n        defaultValue: 0\n    })\n    unit4Order: number;     \n\n    @Column({\n        allowNull: false,\n        defaultValue: 0\n    })\n    unit5Order: number;         \n    \n    @Column({\n        allowNull: false,\n        defaultValue: 0,\n        type: DataType.DECIMAL(8, 3)\n    })\n    unit1kgRatio: number;     \n    \n    @Column({\n        allowNull: false,\n        defaultValue: 0,\n        type: DataType.DECIMAL(8, 3)\n    })\n    unit2kgRatio: number;     \n    \n    @Column({\n        allowNull: false,\n        defaultValue: 0,\n        type: DataType.DECIMAL(8, 3)\n    })\n    unit3kgRatio: number;    \n\n    @Column({\n        allowNull: false,\n        defaultValue: 0,\n        type: DataType.DECIMAL(13, 2)\n    })\n    kgPrice: number;    \n\n    @Column({\n        allowNull: false,\n        defaultValue: 'generic'\n    })\n    productType: string;\n\n    @Column({\n        allowNull: true\n    })\n    badge: string;\n\n\n    \n\n    getCategories(): Category[] {\n        let result = [];\n        for (let i = 0; i < this.categories.length; i++) {\n            result.push(this.categories[i].category)\n        }\n        return result;\n    }\n\n    resources: Resource[];\n\n\n    async getPriceStats() {\n        let q = `select count(*) as count, \n        min(kgPrice) as kgmin, avg(kgPrice) as kgavg, max(kgPrice) as kgmax, \n        min(unit1price) as unit1min, avg(unit1price) as unit1avg, max(unit1price) as unit1max,\n        min(unit2price)  as unit2min, avg(unit1price)  as unit2avg, max(unit2price) as unit2max,\n        min(unit3price)  as unit3min, avg(unit1price)  as unit2avg, max(unit3price) as unit3max\n        from ButcherProducts, Butchers \n        where \n        ButcherProducts.productid=${this.id} and \n        ButcherProducts.enabled=true and \n        ButcherProducts.butcherid = Butchers.id \n        and Butchers.approved=true`\n\n        let res = await Product.sequelize.query(q, {\n            raw: true  ,\n            plain: true,\n            type: QueryTypes.SELECT       \n        } )        \n\n        return res;\n    }\n\n    async loadResources() {\n        this.resources = await Resource.findAll({\n            where: {\n                type: [\"product-photos\", \"product-videos\"],\n                [Op.or]: {\n                    ref1: this.id,\n                    ref2: this.id,\n                    ref3: this.id,\n                    ref4: this.id,\n                    ref5: this.id,\n                    ref6: this.id                \n                }\n            },\n            order: [[\"type\", \"ASC\"], [\"displayOrder\", \"DESC\"], [\"updatedOn\", \"DESC\"]]\n        })\n        this.resources.forEach(c=>c.product = this);\n    }\n\n}\n\nexport default Product;"],"sourceRoot":"../../../src/"}