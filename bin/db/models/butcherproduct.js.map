{"version":3,"sources":["../src/db/models/butcherproduct.ts"],"names":[],"mappings":"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","file":"butcherproduct.js","sourcesContent":["import { Table, Column, DataType, Model, HasMany, CreatedAt, UpdatedAt, DeletedAt, Unique, Default, AllowNull, ForeignKey, BelongsTo } from 'sequelize-typescript';\nimport BaseModel from \"./basemodel\"\nimport Helper from '../../lib/helper';\nimport Product from './product';\nimport Category from './category';\nimport Butcher from './butcher';\nimport ProductCategory from './productcategory';\nimport { PriceView } from '../../models/common';\n\n@Table({\n    tableName: \"ButcherProducts\",\n    indexes: [{\n        name: \"butcherproduct_idx\",\n        fields: [\"butcherid\", \"productid\"],\n        unique: true\n    }]\n})\n\n\n\nclass ButcherProduct extends BaseModel<ButcherProduct> {\n    @ForeignKey(() => Butcher)\n    butcherid: number\n\n    @BelongsTo(() => Butcher, \"butcherid\")\n    butcher: Butcher;\n\n    @ForeignKey(() => Product)\n    productid: number\n\n    @BelongsTo(() => Product, \"productid\")\n    product: Product;\n\n\n    get priceView(): PriceView {\n        let units = ['unit1', 'unit2', 'unit3'];\n        if (this.kgPrice > 0) {\n            let title = 'KG';\n            units.forEach(u=> {\n                if (this.product[`${u}`] == 'kg') {\n                    title = this.product[`${u}title`]\n                }\n            })\n            return {\n                price: this.kgPrice,\n                unit: 'kg',\n                unitTitle: title\n            }\n        } else {\n            \n            for(let i = 0; i< units.length;i++) {\n                let done = this[`${units[i]}enabled`] && this[`${units[i]}price`] > 0;\n                if (done) return {\n                    unit: this.product[`${units[i]}`],\n                    unitTitle: this.product[`${units[i]}title`],\n                    price: this[`${units[i]}price`]\n                }\n            }\n\n            return {\n                unit:'',\n                price: 0.00,\n                unitTitle:''\n            }\n        }\n    }\n\n    @Column({\n        allowNull: true,\n    })\n    enabled: boolean;\n\n    @Column({\n        allowNull: true,\n        type: DataType.DECIMAL(13, 2)\n    })\n    unit1price: number;\n\n    @Column({\n        allowNull: true,\n        type: DataType.DECIMAL(13, 2)\n    })\n    unit2price: number;\n\n    @Column({\n        allowNull: true,\n        type: DataType.DECIMAL(13, 2)\n    })\n    unit3price: number;\n\n    @Column({\n        allowNull: true,\n        type: DataType.DECIMAL(13, 2)\n    })\n    unit4price: number;\n\n    @Column({\n        allowNull: true,\n        type: DataType.DECIMAL(13, 2)\n    })\n    unit5price: number;\n\n    @Column({\n        allowNull: false,\n        defaultValue: true\n    })\n    unit1enabled: boolean;    \n\n    @Column({\n        allowNull: false,\n        defaultValue: true\n    })\n    unit2enabled: boolean;     \n\n    @Column({\n        allowNull: false,\n        defaultValue: true\n    })\n    unit3enabled: boolean;     \n\n    @Column({\n        allowNull: false,\n        defaultValue: true\n    })\n    unit4enabled: boolean;    \n    \n    @Column({\n        allowNull: false,\n        defaultValue: true\n    })\n    unit5enabled: boolean;     \n\n    @Column({\n        allowNull: false,\n        defaultValue: 0,\n        type: DataType.DECIMAL(13, 2)        \n    })\n    kgPrice: number;     \n\n\n    @Column({\n        allowNull: false,\n        defaultValue: 0,\n        type: DataType.DECIMAL(8, 3)\n    })\n    unit1kgRatio: number;     \n\n    @Column({\n        allowNull: false,\n        defaultValue: 0,\n        type: DataType.DECIMAL(8, 3)\n    })\n    unit2kgRatio: number; \n    \n    @Column({\n        allowNull: false,\n        defaultValue: 0,\n        type: DataType.DECIMAL(8, 3)\n    })\n    unit3kgRatio: number;     \n\n    @Column({\n        allowNull: true,\n    })\n    unit1weight: string;\n\n    @Column({\n        allowNull: true,\n    })\n    unit2weight: string;\n\n    @Column({\n        allowNull: true,\n    })\n    unit3weight: string;\n\n\n    @Column({\n        allowNull: true,\n    })\n    displayOrder: number;\n\n    @Column({\n        allowNull: false,\n        defaultValue: false\n    })\n    vitrin: boolean;\n\n    @Column({\n        allowNull: true,\n        type: DataType.TEXT\n    })\n    mddesc: string;   \n\n    @Column({\n        allowNull: true,\n        type: DataType.TEXT\n    })\n    longdesc: string;       \n\n    \n}\n\nexport default ButcherProduct;"],"sourceRoot":"../../../src/"}